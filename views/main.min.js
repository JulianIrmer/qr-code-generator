const SERVER_URL="https://link2qr.herokuapp.com/";function init(){checkForQR(),handleInput()}function handleInput(){document.querySelector(".js-generate").addEventListener("click",async()=>{const e=document.querySelector(".js-input").value.trim();if(0===e.length)return;const t=getSanitizedInput(e),n=SERVER_URL+"api/generate";let a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})});showCode((a=await a.json()).data)})}function showCode(e){const t=document.querySelector(".js-result");t.innerHTML="";const n=document.createElement("img"),a=document.querySelector(".js-save");n.src=e,a.download="your_qr_code",a.href=e,a.classList.remove("hidden"),t.appendChild(n)}function getSanitizedInput(e){let t=e;return e.indexOf("www.")>-1&&-1===e.indexOf("https://")&&-1===e.indexOf("http://")&&(t=e.replace("www.","http://")),t}async function checkForQR(){const e=new URLSearchParams(window.location.search).get("id");let t=await fetch(SERVER_URL+"api/open?id="+e);((t=await t.json()).data.includes("www.")||t.data.includes("http://")||t.data.includes("https://"))&&(window.location.href=t.data)}init();